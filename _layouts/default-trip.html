<!DOCTYPE html>
<!-- #if expr="$HTTP_COOKIE=/fonts\-loaded\=true/" -->
<html AMP lang="en" class="fonts-loaded">
<!-- #else -->
<html AMP lang="en">
<!-- #endif -->

{% include head.html %}

<body class="site{% if site.animated %} animated fade-in-down{% endif %}">
  <div class="site-wrap wide">
    {% if page.type == "listing" %}
      {% include header.html %}
    {% else %}
      {% include header_back.html %}
    {% endif %}

    <div class="trip p2 p-responsive wrap" role="main">
      {% if page.type == "detail" %}
        {{ content }}  
      {% else %}
        <div class="measure">
          {{ content }}
        </div>
      {% endif %}
    </div>
  </div>

  {% include footer.html %}
  <script src="/js/fontfaceobserver.js"></script>
  <script>
    (function( w ){
        // if the class is already set, we're good.
        if( w.document.documentElement.className.indexOf( "fonts-loaded" ) > -1 ){
            return;
        }
        var fontA = new w.FontFaceObserver( "Merriweather", {
            weight: 300
        });
        var fontB = new w.FontFaceObserver( "Lato", {
            weight: 900
        });
        w.Promise
            .all([fontA.check(), fontB.check()])
            .then(function(){
                w.document.documentElement.className += " fonts-loaded";
                console.log('All fonts are loaded');
            }, function () {
                console.log('Web font could not be loaded in time. Falling back to system fonts.');
            });
    }( this ));
  </script>
</body>
</html>
